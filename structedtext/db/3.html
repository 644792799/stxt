<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/tr/html4/strict.dtd'> 
<html lang="zh-tw"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<link rel="stylesheet" href="/css/web.css" />
<title>B-樹</title>
</head>
<body>
<div id="topbar">
topbar
</div>
<div id="sidebar">
主題列表<br/><a href="1.html">1.時戳並行控制</a><br/><a href="2.html">2.鎖定並行控制</a><br/><a href="3.html">3.B-樹</a><br/><a href="4.html">4.B*-樹</a><br/><a href="5.html">5.B+樹</a><br/><a href="6.html">6.應用為 DBMS 的 INDEX	</a><br/>
</div>
<div id="rightbar">
<script type="text/javascript"><!--
google_ad_client = "pub-7516968926110807";
/* Structed text left vertical unit */
google_ad_slot = "5496674888";
google_ad_width = 120;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div id="content">
<h1>3.B-樹</h1>
<h2>3.1.m-路搜尋樹</h2>
<p>
m-路搜尋樹(m-way search tree)可能是空的，或者滿足下列的特性：
# 每個節點最多有 m 個子樹
# 若一節點 N 具有 n 個鍵值，其結構如下所示：
</p>
<p>
  N:(C0), (K1, C1), (K2, C2),...,(Kn, Cn)
</p>
<p>
　其中 Ci , 0 <= i <= n < m 為指向子樹的指標，而 
       Ki , 1 <= i <= n < m 為鍵值。
</p>
<p>
# 每個鍵值依序排列，滿足下式：
</p>
<p>
  Ki < Ki+1 , 1 <= i  < m。
  
# 所有在子樹 Ci 中的鍵值小於 K(i+1) ，大於 Ki, 0 < i < n。
# 所有在子樹 Cn 中的鍵值大於 Kn ，所有在子樹 C0 中的鍵值小於 K1 。
# 所有的子樹 Ci , 0 <= i <= n 也是 m-路搜尋樹。
</p>
<p>
m 稱為最小因子，用來控制子樹的數目。
</p>
<h2>3.2.B-樹限制</h2>
<p>
每個 B-樹具有一個度數(order)，若度數為 t，則記為 B(t)-樹
必須滿足以下限制：
# 其為一個 2t-路搜尋樹
# 根若不是葉，至少有 2 個子樹
# 除了根及葉，每個節點至少有 t 個子樹
# 葉其子樹數目為 0，但其鍵值數目同內部節點
# 所有葉高度相同
</p>
<p>
限制用至少子樹數 t 定義，而不用最多子樹數 m 來定義，
因為使用 m 定義最少子樹數如下式：
</p>
<p>
ceil(m/2) 
</p>
<p>
必須用到 ceil 函數，而使用 t 定義最多子樹數如下式：
</p>
<p>
2t
</p>
<p>
較為簡單
</p>
<h2>3.3.B-樹定理</h2>
<p>
令 h 為 B(t)-樹的高度，n 為其鍵值數目，則滿足式：
</p>
<p>
log(n+1/2, 2t) <= h <= log(n+1/2, t)
</p>
<p>
證明：
  h 的上限證明
  # n >= 1 + 2(t-1) + 2(t-1)t +...+ 2(t-1)t**h
  # n >= 1 + 2(t-1)(1 + t + t**2 +...+  t**h)
  # n >= 1 + 2(t-1)( 1   -t**h / 1-t)
  # n >= 1 + 2(t-1)( t**h-1     / t-1)
  # n >= 1 + 2(t**h-1)
  # n >= 2(t**h)-1
  # n+1 / 2 >= t**h
  # log(n+1/2, t) >= h
  # h <= log(n+1/2, t)
</p>
<p>
  h 的下限證明
  # n   =< (2t-1) + (2t-1)2t + (2t-1)2t**2 +...+ 2(t-1)2t**h
  # n   =< (2t-1)(1 + 2t + 2t**2 +...+  2t**h)
  # n   =< (2t-1)(1    - 2t**h / 1 -2t)
  # n   =< (2t-1)(2t**h- 1     / 2t-1 )
  # n   =< 2t**h- 1
  # n+1 =< 2t**h
  # log(n+1, 2t) =< h
</p>

</div>
</body>
</html>
